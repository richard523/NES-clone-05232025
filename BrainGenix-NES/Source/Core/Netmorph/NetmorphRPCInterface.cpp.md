## Inputs

The `NetmorphRPCInterface` class receives inputs primarily through:
*   **Constructor:**
    *   `_Logger` (BG::Common::Logger::LoggingSystem\*): Pointer to the logging system.
    *   `_Simulations` (std::vector<std::unique_ptr<Simulation>>\*): Pointer to the vector of active simulations.
    *   `_RPCManager` (API::RPCManager\*): Pointer to the RPC manager for route registration.
*   **RPC Methods (as JSON strings):**
    *   `NetmorphSetModelfile`: Expects `SimulationID` and `ModelContent`.
    *   `NetmorphStartSimulation`: Expects `SimulationID` and optionally `ModelContent`.
    *   `NetmorphGetStatus`: Expects `SimulationID`.
    *   `NetmorphGetFile`: Expects `SimulationID` and `FileID`.

Internal helper `API::HandlerData` is used to parse these JSON requests.

## Outputs

The RPC methods of `NetmorphRPCInterface` produce JSON string responses:
*   `NetmorphSetModelfile`: Returns a status code. Modifies `NetmorphParams.ModelContent` for the specified simulation.
*   `NetmorphStartSimulation`: Returns a status code and the `NetmorphOutputDirectory`. Initiates a new thread for `ExecuteNetmorphOperation`. Modifies `NetmorphParams.State`, `NetmorphParams.Progress_percent`, and `NetmorphParams.OutputDirectory`.
*   `NetmorphGetStatus`: Returns status code, `Progress_percent`, and `NetmorphStatus` (string).
*   `NetmorphGetFile`: Returns status code and `FileData` (Base64 encoded content of the requested file).

## Description

The `NetmorphRPCInterface.cpp` file, along with its header, defines a class that exposes Netmorph functionalities through an RPC mechanism. It allows clients to manage Netmorph simulations by setting model files, starting the simulation process (which runs asynchronously in a worker thread), querying the current status and progress, and retrieving output files generated by Netmorph. This interface acts as a bridge between the core NES simulation management and the external Netmorph library.

## ASCII Diagram

```
+--------------------------------------+
|  NetmorphRPCInterface                |
+--------------------------------------+
| - Simulations_*: std::vector<...>    |
| - Logger_*: LoggingSystem*           |
+--------------------------------------+
| + NetmorphRPCInterface(              |
|     _Logger*, _Simulations*,          |
|     _RPCManager*                     |
|   )                                  | // Registers RPC routes
| + ~NetmorphRPCInterface()            |
|                                      |
|   // RPC Methods (Input: JSON string, Output: JSON string)
| + NetmorphSetModelfile(...)          | // Sets Netmorph model content
| + NetmorphStartSimulation(...)       | // Starts Netmorph worker thread
| + NetmorphGetStatus(...)             | // Gets Netmorph run status/progress
| + NetmorphGetFile(...)               | // Gets Netmorph output file (Base64)
+--------------------------------------+
        |
        | Interacts with (via _Simulations_ pointer)
        v
+--------------------------------------+
|  Simulation Object                   |
+--------------------------------------+
|  + NetmorphParams: NetmorphParameters| // Stores model, state, results
|  + NetmorphWorkerThread: std::thread | // Thread for ExecuteNetmorphOperation
+--------------------------------------+
        |
        | NetmorphStartSimulation() launches
        v
+--------------------------------------+
|  ExecuteNetmorphOperation (in thread)|
|  (from NetmorphManagerThread.cpp)    |
+--------------------------------------+
```
